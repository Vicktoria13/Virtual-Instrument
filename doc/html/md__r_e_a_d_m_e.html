<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: ProjetC_NGUYEN_SYSOUVANH</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ProjetC_NGUYEN_SYSOUVANH </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
ProjetC ROB3</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Notice d'utilisation</h2>
<p>Ceci est notre dépot pour le projet C de ROB3, 2021-2022. Ce projet a été realisé en binôme : Victoria Nguyen et Matthieu Sysouvanh</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Cahier des charges :</h2>
<p>Implementation d'une machine virtuelle, dans l'esprit de Pixar. Se base sur la libraire OpenCV pour vision par ordinateur et une caméra webcam, en mouvement via 2 servomoteurs ( 2 degrés de liberté).</p>
<p><b>Contient deux dossiers :</b></p>
<ol type="1">
<li>Projet Imposé : Suivi de couleur</li>
<li>Projet Libre : implementation d'instruments virtuels + jeu similaire a un piano Tiles, basé sur les servomoteurs et le mouvement d'un objet tracké par sa couleur</li>
</ol>
<p>Contient un fichier doc, contenant la documentation html relié a chacun des 2 dossiers pour chaque programme.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Pré Requis :</h1>
<ul>
<li>avoir la carte Arch Pro Linux + deux servomoteurs + une webcam reliée aux servomoteurs.</li>
<li>Etre dans un environnement sans trop de lumière, ne pas être à contre jour.</li>
<li>Avoir la dernière version d'OPEN CV, disponible via ce lien : <a href="https://docs.opencv.org/4.x/d7/d9f/tutorial_linux_install.html">https://docs.opencv.org/4.x/d7/d9f/tutorial_linux_install.html</a></li>
<li>Pour le projet Libre : il est nécessaire d'installer la librairie SDL2 , à telecharger via ce lien : <a href="https://devopssec.fr/article/telechargement-compilation-projet-sdl#begin-article-section">https://devopssec.fr/article/telechargement-compilation-projet-sdl#begin-article-section</a> ainsi que la bibliotheque SDL_Mixer, afin de pouvoir avoir le son. Ces librairies doivent être installées dans le fichier path de l'environnement utilisateur pour que le makefile fonctionne. SDL_mixer s'installe en suivant les commandes <a href="https://zoomadmin.com/HowToInstall/UbuntuPackage/libsdl2-mixer-2.0-0">https://zoomadmin.com/HowToInstall/UbuntuPackage/libsdl2-mixer-2.0-0</a></li>
</ul>
<p>Remarque : en cas de non reconnaissance des fichiers SDL2 et SDL_Mixer, modifier le <code>#include</code> dans les entêtes des programmes <code>#include</code> pour que le compilateur ait le bon chemin. Mettre le fichier <code>SDL_Mixer.h</code> dans le même dossier que les .h de SDL2.</p>
<p><b>A la fin du README se trouve un lien vidéo permettant d'avoir une démonstration visuelle du projet</b></p>
<h1><a class="anchor" id="autotoc_md5"></a>
PROJET IMPOSE :</h1>
<p><b>Pour le lancer, ouvrir un terminal dans l'emplacement du fichier .../projetImpose , puis lancer <code>make</code> pour compiler, puis <code>./main</code> pur executer.</b> <b>L'éxécutable est le fichier main</b>.</p>
<p>Celui_ci s'organise en un <code>fichier.cpp</code> et un makeFile. Pour detecter une couleur, il faut cliquer sur l'image affichée sur l'écran. L'endroit (=pixel) où l'on clique sera tracké par le programme. Si, lors du tracking, on se deplace dans des points où la luminosité change, il faut re-appuyer sur l'endroit de l'écran de la couleur trackée.</p>
<p>Si on part trop à droite, alors la caméra, via les servomoteurs, se deplacera pour suivre l'objet tracké.</p>
<p><b>A retenir</b> : il est important, pour que l'algorithme sache quelle couleur tracker, de cliquer sur l'image l'object à tracker. Par exemple, si on veut tracker un ballon rouge, il faut au demarrage :</p>
<ol type="1">
<li>placer le ballon dans le champ de vision de la caméra</li>
<li>cliquer sur ballon dans le retour image</li>
<li>un Rectangle de la couleur du pixel sur lequel on a cliqué s'affiche et entoure l'objet tracké de la couleur trackée</li>
<li>Bouger l'objet : le rectangle se deplace pour suivre l'image Si, lors du déplacement, le rectangle ne suit plus le ballon, c'est que la luminosité a changé depuis le moment où l'on a cliqué. Il faut alors reclique sur la position courante du ballon , ect...</li>
</ol>
<h1><a class="anchor" id="autotoc_md6"></a>
PROJET Libre</h1>
<ul>
<li>Lorsque le programme se lance, il y a une fenetre graphique : c'est le menu du jeu. On a le choix entre un mode manuel (=freeestyle) et un mode jeu vidéo.</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
MODE Freestyle :</h2>
<p>Lors du lancement du programme, une fenetre liée a la webcam s'affiche. En arrière plan, on voit un piano à 12 touches, ainsi que 3 cases jouant un son particulier. Pour commencer , il faut dans l'ordre :</p>
<ol type="1">
<li>Prendre un objet avec une couleur peu présente dans l'environnement extérieur, afin de limiter les problèmes de detection. Dans l'exemple, on utilise un feutre avec un capuchon rouge. Utiliser un objet de couleur X, possedant une surface petite, afin d'etre précis. Un stylo convient parfaitement.</li>
<li>Deux fenetres s'afficheront à l'éxécution : une fenêtre est le rendu avec les instruments et la detection, l'autre est la fenetre ou il faut choisir la couleur a tracker. Cela se base sur le me principe que le projet imposé ; on clique avec la souris sur la couleur à detecter. Un contour vert s'affiche alors selon le contour de la forme de couleur detectée. N'hesiter pas à cliquer plusieurs fois au même endroit, en changeant l'orientation, afin que le contour vert n'entoure bien uniquement que l'objet de couleur trackée. (sur la photo, uniquement le bouchon du stylo).</li>
<li>une fois le choix de la couleur faite, on peut se balader dans l'écran via le centre du contour crée ; dès lors que ce centre passe dans l'une des 12 touches du piano, ou dans l'un des 3 cases de couleur, le son correspondant est joué. Le rythme est similaire pour chaque son, permettant un rendu sonore agréable. Certains sons sont courts (une note), d'autre sont plus longs ( batterie).</li>
<li>Un rectangle rouge entoure les instruments virtuels : si le centre de l'objet tracké sort par la gauche où par la droite, alors le servomoteur bougera en conséquence, afin de rester aligné sur l'utilisateur.</li>
</ol>
<h1><a class="anchor" id="autotoc_md8"></a>
Important !</h1>
<p><b>Pour que les sons fonctionnent, il est nécessaire de modifier les chemins d'accès de chaque son : Pour cela , ouvrir le fichier <code><a class="el" href="play_8cpp.html" title="fichier cpp contenant les fonctions appelées dans le programme principal. Permet de jouer des instrum...">play.cpp</a></code> et modifier la ligne 91 avec le path absolu pour arriver jusqu'au dossier. Ce détail est très important pour qu'il y ait lecture des fichiers sons !!</b></p>
<h3><a class="anchor" id="autotoc_md9"></a>
AVANT :</h3>
<p><code>char chemin_acces[200]="/home/victoria/Bureau/ProjetROB3/ProjetC_NGUYEN_SYSOUVANH/projetLibre/samples piano/";</code></p>
<h3><a class="anchor" id="autotoc_md10"></a>
APRES</h3>
<p><code>char chemin_acces[200]=".....A REMPLACER...../ProjetC_NGUYEN_SYSOUVANH/projetLibre/samples piano/";</code></p>
<h3><a class="anchor" id="autotoc_md11"></a>
MODE JEU VIDEO</h3>
<p>En lançant ce mode la fênetre de menu se ferme et est remplacée par la fenêtre de jeu. Celle ci comporte boutons ainsi qu'un compteur de score et de vies.</p>
<p>Cliquez dans un premier temps sur l'objet de couleur à suivre dans le retour caméra. Un éclairage uniforme sans reflets ni contrejour est préférable. Vous pouvez à tout moment re-cliquer sur l'écran pour réinitialiser la couleur à détecter.</p>
<p>Une fois l'objet sélectionné un cercle apparait en son centre. Le but du jeu est de s'en servir comme curseur pour activer les boutons qui passent au jaune.</p>
<p>Si vous y arrivez à temps vous marquerez des points. Si vous n'y arrivez par vous perdrez une vie.</p>
<p>La caméra pourra bouger aléatoirement entre 3 positions, vous devrez alors vous déplacer pour rester dans le cadre et garder le rythme.</p>
<p>La difficulté augmente graduellement avec le score, les événements s'enchainent plus vite et vous avez moins de temps pour appuyer sur les boutons.</p>
<p>Le jeu s'arrête une fois toutes les vies épuisées ou lors d'un appui sur <code>echap</code>.</p>
<h4><a class="anchor" id="autotoc_md12"></a>
PARAMETRES:</h4>
<p>Plusieurs variables globales gèrent des paramètres adaptables du jeu. La temporisation des évènements dépends du nombre de ticks/s de votre sytème, aussi la vitesse du jeu est proportionnelle au #define TEMPO</p>
<p>Le nombre de vies est géré par <code>#define VIES</code></p>
<p><b>Important !: Le programme nécessite que la caméra et les servos moteurs soient reliés à l'ordinateur. Le choix du port de la caméra se fait en éditant la variable #define ID et le chemin menant au port série doit être spécifié correctement si vous n'utilizez pas <code>/dev/ttyACM0</code>.</b></p>
<h1><a class="anchor" id="autotoc_md13"></a>
Illustration</h1>
<p><b>Afin d'avoir un exemple concret d'utilisation, cliquez sur ce lien afin de bien comprendre comment marche le programme.</b> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
